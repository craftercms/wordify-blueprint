{"version":3,"sources":["shared/context.js","shared/DynamicRoute.js","shared/Router.js","shared/AppIntl.js","shared/App.js","index.js","shared/utils.js","shared/hooks.js","fetchQuery.js","shared/queries.graphql.js","shared/CircularProgressSpinner.js","shared/BaseLayout.js","shared/SearchForm.js","pages/NotFound.js","shared/contentTypeMap.js","shared/ContentType.js","components/Header.js","components/Footer.js"],"names":["GlobalContext","createContext","useGlobalContext","context","useContext","Error","GlobalContextProvider","props","useSpreadState","isAuthoring","locale","pages","pagesLoading","theme","$","jQuery","state","setState","value","useMemo","Provider","DynamicRoute","match","location","useState","url","path","includes","substring","indexOf","useEffect","destroyed","page","parseInt","parse","search","pagination","limit","offset","reportNavigation","fetchQuery","text","byUrlQuery","includePosts","postsLimit","postsOffset","then","data","model","parseDescriptor","content","items","levelDescriptor","levelDescriptors","filter","file__name","map","meta","siteTitle","siteTitle_s","socialLinks","socialLinks_o","item","disqus","websiteShortname","websiteShortname_s","posts","total","document","title","pageTitle_s","pageDescription_s","description","head","querySelector","setAttribute","window","scroll","CircularProgressSpinner","ContentType","Router","component","Locales","en","es","AppIntl","messages","App","addAuthoringSupport","fallback","ReactDOM","render","StrictMode","getElementById","attr","documentElement","getAttribute","createResource","factory","result","status","suspender","response","error","read","site","innerHTML","Cookies","get","crafterConfig","baseUrl","process","graphQLServer","propsToRemove","preParseSearchResults","source","Object","entries","forEach","prop","endsWith","Array","isArray","i","createTaxonomyFilter","name","taxonomy","craftercms","neverResource","Promise","reducer","nextState","initializerArg","initializer","useReducer","useNavigation","update","destroyedRef","useRef","current","useFooter","footer","footerLoading","component_footer","useRecentPosts","postsLoading","postsQuery","usePosts","paginationData","categories","tags","exclude","setPosts","categoriesFilter","category","matches","key","tagsFilter","tag","itemsPerPage","currentPage","pageCount","Math","ceil","useTaxonomiesResource","resource","setResource","usePencil","parentModelId","useICE","useDnD","fieldId","useDropZone","zoneName","useSearchQuery","useLocation","q","query","setQuery","p","setPage","onChange","useCallback","e","target","contentTypes","useUrlSearchQueryFetchResource","size","createQuery","id","from","pipe","hits","rest","counted","parsedHits","_source","toPromise","operation","variables","fetch","method","headers","body","JSON","stringify","json","commonFragments","main","message","screenHeight","className","cx","cy","r","fill","strokeWidth","strokeMiterlimit","BaseLayout","children","count","SearchForm","history","useHistory","placeholder","classes","assign","form","input","inputWrapper","onSubmit","preventDefault","trim","push","type","NotFound","style","textAlign","padding","NotDeveloped","lazy","Component","contentTypeMap","contentTypeId","WrappedContentType","wrapper","Wrapper","ice","cleanWrapperProps","cleanPassDownProps","ContentTypeWithPencil","Header","nav","role","link","href","url_s","rel","socialNetwork_s","data-toggle","onClick","toggleClass","aria-expanded","aria-controls","to","sort","a","orderDefault_f","b","exact","activeClassName","navLabel","Footer","aboutTitle_s","src","aboutImage_s","alt","about_t","quickLinksTitle_s","quickLinks_o","label_s","socialLinksTitle_s","dangerouslySetInnerHTML","__html","copyright_html_raw"],"mappings":"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","file":"static/js/main.7e082ecc.chunk.js","sourcesContent":["/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, { createContext, useContext, useMemo } from 'react';\nimport { isAuthoring } from './utils';\nimport { useSpreadState } from './hooks';\n\nexport const GlobalContext = createContext();\n\nfunction useGlobalContext() {\n  const context = useContext(GlobalContext);\n  if (!context) {\n    throw new Error(`useGlobalContext must be used within a GlobalContextProvider`);\n  }\n  return context;\n}\n\nfunction GlobalContextProvider(props) {\n  const [state, setState] = useSpreadState({\n    isAuthoring: isAuthoring(),\n    locale: 'en',\n    pages: null,\n    pagesLoading: false,\n    theme: 'light',\n    $: props.jQuery\n  });\n  const value = useMemo(() => [state, setState], [state, setState]);\n  return <GlobalContext.Provider value={value} {...props} />;\n}\n\nexport { GlobalContextProvider, useGlobalContext };\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, { useEffect, useState } from 'react';\n\nimport CircularProgressSpinner from './CircularProgressSpinner';\nimport { fetchQuery } from '../fetchQuery';\nimport byUrlQuery from './queries.graphql';\nimport ContentType from './ContentType';\nimport { parseDescriptor } from '@craftercms/content';\nimport { reportNavigation } from '@craftercms/ice';\nimport { parse } from 'query-string';\n\nconst limit = 8;\n\nexport default function DynamicRoute(props) {\n  const { match, location } = props;\n  const [state, setState] = useState(null);\n  let url = match.path.includes(':')\n    ? match.path.substring(0, match.path.indexOf(':') -1)\n    : match.url;\n\n  useEffect(() => {\n    let destroyed = false;\n    let page = parseInt(parse(location.search).page ?? 1) - 1;\n    const pagination = { limit, offset: page ? (page * limit) : 0 };\n    reportNavigation(url);\n    fetchQuery(\n      // { text: byUrlQuery.params.text.replace(/__typename/g, '') },\n      { text: byUrlQuery },\n      {\n        url: `.*${url === '/' ? 'website/index' : url}.*`,\n        includePosts: true,\n        postsLimit: pagination.limit,\n        postsOffset: pagination.offset\n      }\n    ).then(({ data }) => {\n      if (!destroyed) {\n        const model = parseDescriptor(data.content.items?.[0]);\n        const levelDescriptor = data.levelDescriptors.items\n          .filter(levelDescriptor => levelDescriptor.file__name === 'crafter-level-descriptor.level.xml')\n          .map(levelDescriptor => levelDescriptor)[0];\n\n        setState({\n          model,\n          meta: {\n            siteTitle: levelDescriptor.siteTitle_s,\n            socialLinks: levelDescriptor.socialLinks_o.item,\n            disqus: {\n              websiteShortname: levelDescriptor.websiteShortname_s\n            },\n            posts: {\n              total: data.posts.total,\n              ...pagination\n            }\n          }\n        });\n        if (model) {\n          document.title = model.pageTitle_s ?? 'Wordify Crafter CMS';\n          if (model.pageDescription_s) {\n            const description = document.head.querySelector('meta[name=\"description\"]');\n            description && description.setAttribute('content', model.pageDescription_s ?? '');\n          }\n        }\n      }\n    });\n    return () => {\n      destroyed = true;\n    };\n  }, [url, location.search]);\n\n  useEffect(() => {\n    window.scroll(0, 0);\n  }, [url])\n\n  if (state === null) {\n    return <CircularProgressSpinner />;\n  } else {\n    return <ContentType {...state} {...props} />;\n  }\n\n}\n\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\n\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport DynamicRoute from './DynamicRoute';\n\nexport default function Router() {\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route path=\"/category/:id?\" component={DynamicRoute} />\n        <Route path=\"/tag/:id?\" component={DynamicRoute} />\n        <Route path=\"/*\" component={DynamicRoute} />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\nimport { IntlProvider } from 'react-intl';\nimport { useGlobalContext } from './context';\nimport en from '../assets/locales/en';\nimport es from '../assets/locales/es';\n\nconst Locales = {\n  en,\n  es\n};\n\nconst AppIntl = (props) => {\n  const [{ locale }] = useGlobalContext();\n  return <IntlProvider {...props} locale={locale} messages={Locales[locale]}/>;\n};\n\nexport default AppIntl;\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, { Suspense, useEffect } from 'react';\nimport Router from './Router';\nimport CircularProgressSpinner from './CircularProgressSpinner';\nimport { GlobalContextProvider } from './context';\nimport AppIntl from './AppIntl';\nimport { isAuthoring } from './utils';\nimport { addAuthoringSupport } from '@craftercms/ice/esm2015/ice';\n\nexport default function App(props) {\n  useEffect(() => {\n    if (isAuthoring()) {\n      addAuthoringSupport();\n    }\n  }, []);\n  return (\n    <GlobalContextProvider jQuery={props.jQuery}>\n      <AppIntl>\n        <Suspense\n          fallback={\n            <CircularProgressSpinner />\n          }\n        >\n          <Router />\n        </Suspense>\n      </AppIntl>\n    </GlobalContextProvider>\n  );\n}\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './shared/App';\n// import * as serviceWorker from './serviceWorker';\n\n// On occasions, Crafter's jQuery overrides the site's jQuery\n// briefly. This will get fixed on next releases of Crafter CMS,\n// but for now, adding jQuery to the global context to 'cache' it.\nReactDOM.render(\n  <React.StrictMode>\n    <App jQuery={window.jQuery} />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Cookies from 'js-cookie';\n\nexport function isAuthoring() {\n  const html = document.documentElement;\n  const attr = html.getAttribute('data-craftercms-preview');\n  return (\n    // eslint-disable-next-line no-template-curly-in-string\n    attr === '${modePreview?c}' || // Otherwise disable/enable if you want to see pencils in dev server.\n    attr === 'true'\n  );\n}\n\nexport function createResource(factory) {\n  let result;\n  let status = \"pending\";\n  let suspender = factory().then(\n    response => {\n      status = \"success\";\n      result = response;\n    },\n    error => {\n      status = \"error\";\n      result = error;\n    }\n  );\n  return {\n    read() {\n      if (status === \"pending\") {\n        throw suspender;\n      } else if (status === \"error\") {\n        throw result;\n      } else if (status === \"success\") {\n        return result;\n      }\n    }\n  };\n}\n\nlet site = document.getElementById('2fb5164e').innerHTML;\nif (site === 'null') {\n  site = Cookies.get('crafterSite');\n}\n\nexport const crafterConfig = {\n  baseUrl: process.env.REACT_APP_CRAFTERCMS_BASE_URL,\n  site,\n  graphQLServer: process.env.REACT_APP_GRAPHQL_SERVER\n};\n\n// TODO: To be moved to sdk and/or removed\n// https://github.com/craftercms/craftercms/issues/4057\nconst propsToRemove = ['rootId', 'crafterSite', 'crafterPublishedDate', 'crafterPublishedDate_dt', 'inheritsFrom_smv'];\nexport function preParseSearchResults(source) {\n  Object.entries(source).forEach(([prop, value]) => {\n    if (propsToRemove.includes(prop)) {\n      delete source[prop];\n    } else if (prop.endsWith('_o')) {\n      if (!Array.isArray(value.item)) {\n        source[prop] = { item: [value.item] };\n      }\n      source[prop].item.forEach((item, i) => {\n        source[prop].item[i] = preParseSearchResults(item);\n        if (item.component) {\n          source[prop].item[i].component = preParseSearchResults(item.component);\n        }\n      });\n    }\n  });\n  return source;\n}\n\nexport function createTaxonomyFilter(name) {\n  return (taxonomy => taxonomy.craftercms.path.includes(name));\n};\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { useCallback, useEffect, useReducer, useRef, useState } from 'react';\nimport { fetchQuery } from '../fetchQuery';\nimport { useGlobalContext } from './context';\nimport { useDropZone, useICE } from '@craftercms/ice/react';\nimport { parse } from 'query-string';\nimport { useLocation } from 'react-router-dom';\nimport { crafterConfig, createResource, preParseSearchResults } from './utils';\nimport { createQuery, search } from '@craftercms/search';\nimport { map } from 'rxjs/operators';\nimport { parseDescriptor } from '@craftercms/content';\nimport { postsQuery } from './queries.graphql';\n\nexport const neverResource = createResource(() => new Promise(() => void 0));\n\nconst reducer = (state, nextState) => {\n  return { ...state, ...nextState };\n}\n\nexport function useSpreadState(initializerArg, initializer) {\n  return useReducer(reducer, initializerArg, initializer);\n}\n\nexport function useNavigation() {\n  const [{ pages, pagesLoading }, update] = useGlobalContext();\n  const destroyedRef = useRef(false);\n  useEffect(() => {\n    return () => {\n      destroyedRef.current = true;\n    };\n  }, []);\n  useEffect(() => {\n    if (!pages && !pagesLoading) {\n      update({ pagesLoading: true });\n      fetchQuery({\n        text: `\n          query Nav {\n            pages {\n              total\n              items {\n                navLabel\n                contentTypeId: content__type\n                url: localId(transform: \"storeUrlToRenderUrl\")\n                placeInNav(filter: { equals: true }) @skip(if: true)\n                orderDefault_f\n              }\n            }\n          }\n        `\n      }).then(({ data }) => {\n        (!destroyedRef.current) && update({ pages: data.pages.items });\n      });\n    }\n  }, [update, pages, pagesLoading]);\n  return pages;\n}\n\nexport function useFooter() {\n  const [{ footer, footerLoading }, update] = useGlobalContext();\n  const destroyedRef = useRef(false);\n\n  useEffect(() => {\n    return () => {\n      destroyedRef.current = true;\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!footer && !footerLoading) {\n      update({ footerLoading: true });\n      fetchQuery({\n        text: `\n          query Footer {\n            component_footer {\n              items {\n                aboutTitle_s\n                about_t\n                aboutImage_s\n                quickLinksTitle_s\n                socialLinksTitle_s\n                file__name(filter: {matches: \"site-footer.xml\"})\n                internal__name\n                localId\n                quickLinks_o {\n                  item {\n                    label_s\n                    url_s\n                  }\n                }\n                copyright_html_raw\n              }\n            }\n          }\n        `\n      }).then(({ data }) => {\n        (!destroyedRef.current) && update({ footer: parseDescriptor(data.component_footer.items)[0] });\n      });\n    }\n  }, [update, footer, footerLoading]);\n  return footer;\n}\n\n// stores posts in globalContext to avoid multiple calls\nlet useRecentPostsLoading = false;\nexport function useRecentPosts() {\n  const [{ posts }, update] = useGlobalContext();\n  const destroyedRef = useRef(false);\n\n  useEffect(() => {\n    return () => {\n      destroyedRef.current = true;\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!posts && !useRecentPostsLoading) {\n      update({ postsLoading: true });\n      fetchQuery({\n        text: postsQuery\n      }).then(({ data }) => {\n        (!destroyedRef.current) && update({ posts: parseDescriptor(data.posts.items) });\n      });\n    }\n  }, [update, posts]);\n  return posts;\n}\n\nexport function usePosts(paginationData, categories, tags, exclude) {\n  const [posts, setPosts] = useState();\n\n  useEffect(() => {\n    let categoriesFilter = categories\n      ? Array.isArray(categories)\n        ? categories.map(category => ({ matches: category.key }))\n        : [{ matches: categories.key }]\n      : [];\n    let tagsFilter = tags\n      ? Array.isArray(tags)\n        ? tags.map(tag => ({ matches: tag.key }))\n        : [{ matches: tags.key }]\n      : [];\n\n    fetchQuery(\n      { text: postsQuery },\n      {\n        postsLimit: paginationData.itemsPerPage,\n        postsOffset: (paginationData.currentPage * paginationData.itemsPerPage),\n        categoriesFilter,\n        tagsFilter,\n        exclude: exclude??\"\"\n      }\n    ).then(({ data }) => {\n      setPosts({\n        items: parseDescriptor(data.posts.items),\n        total: data.posts.total,\n        pageCount: Math.ceil(data.posts.total/paginationData.itemsPerPage)\n      });\n    });\n  }, [paginationData, categories, tags, exclude]);\n\n  return posts;\n}\n\nexport function useTaxonomiesResource() {\n  const [resource, setResource] = useState(neverResource);\n\n  useEffect(() => {\n    const resource = createResource(\n      () => fetchQuery({\n        text: `\n        query Taxonomies {\n          taxonomy {\n            total\n            items {\n              guid: objectId\n              path: localId\n              contentTypeId: content__type\n              dateCreated: createdDate_dt\n              dateModified: lastModifiedDate_dt\n              label: internal__name\n              items {\n                item {\n                  key\n                  value\n                  image_s\n                }\n              }\n            }\n          }\n        }\n      `\n      })\n    );\n    setResource(resource);\n  }, []);\n  return resource;\n}\n\nexport function usePencil(props) {\n  const { model, parentModelId } = props;\n  const [{ isAuthoring }] = useGlobalContext();\n  return useICE({ model, parentModelId, isAuthoring }).props;\n}\n\nexport function useDnD(props) {\n  const { model, fieldId } = props;\n  const [{ isAuthoring }] = useGlobalContext();\n  // Note on version 1.2.3 of SDK, zoneName will be deprecated, in favour of fieldId\n  return useDropZone({ model, zoneName: fieldId, isAuthoring }).props;\n}\n\nexport function useSearchQuery() {\n  const { search } = useLocation();\n  const [query, setQuery] = useState(() => parse(search).q ?? '');\n  const [page, setPage] = useState(() => parse(search).p ?? 0);\n  const onChange = useCallback((e) => setQuery(e.target.value), []);\n  useEffect(() => {\n    setQuery(parse(search).q ?? '');\n    setPage(parse(search).p ?? 0);\n  }, [search]);\n\n  return [query, onChange, setQuery, page];\n}\n\nconst contentTypes = ['/component/post'];\nexport function useUrlSearchQueryFetchResource(size = 1) {\n  const [query, , , page] = useSearchQuery();\n  const [resource, setResource] = useState(neverResource);\n\n  // https://github.com/facebook/react/issues/14413\n  useEffect(() => {\n    // FYI: A GraphQL query could also be used instead of a direct Elasticsearch\n    setResource(createResource(\n      () => search(\n        createQuery('elasticsearch', {\n          query: {\n            'bool': {\n              'filter': [\n                { 'bool': { 'should': contentTypes.map(id => ({ 'match': { 'content-type': id } })) } },\n                { 'multi_match': { 'query': query, 'type': 'phrase_prefix'} }\n              ]\n            }\n          },\n          size,\n          from: page\n        }),\n        crafterConfig\n      ).pipe(\n        map(({ hits, ...rest }) => {\n          const counted = {};\n          const parsedHits = hits.map(({ _source }) => parseDescriptor(\n            preParseSearchResults(_source)\n          )).filter((content) => {\n            // TODO: Search currently coming with duplicates. Should address at the elastic query level.\n            if (content.craftercms.id in counted) {\n              return false;\n            } else {\n              counted[content.craftercms.id] = true;\n              return true;\n            }\n          });\n          return { ...rest, hits: parsedHits };\n        })\n      ).toPromise()\n    ));\n  }, [query, page, size]);\n  return resource;\n}\n\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { crafterConfig } from './shared/utils';\n\nexport function fetchQuery(\n  operation,\n  variables\n) {\n  return fetch(`${crafterConfig.graphQLServer}?crafterSite=${crafterConfig.site}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      query: operation.text,\n      variables\n    })\n  }).then(response => response.json());\n}\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n// language=GraphQL\nconst commonFragments = `\n  fragment byUrlQueryPost on component_post {\n    ...byUrlQueryContentItemFields\n    slug: localId(transform: \"storeUrlToRenderUrl\")\n    pageTitle_s\n    pageDescription_s\n    blurb_t\n    headline_s\n    mainImage_s\n    content_o {\n      item {\n        key\n        component {\n          ...on component_rich_text {\n            ...byUrlQueryRichText\n          }\n          ...on component_image {\n            ...byUrlQueryImage\n          }\n          ...on component_responsive_columns {\n            ...byUrlQueryResponsiveColumns\n          }\n        }\n      }\n    }\n    authorBio_o {\n      item {\n        key\n        component {\n          ...byUrlQueryBioFragment\n        }\n      }\n    }\n    categories_o {\n      item {\n        key(filter: {or: $categoriesFilter})\n        value_smv\n      }\n    }\n    tags_o {\n      item {\n        value_smv\n        key(filter: {or: $tagsFilter})\n      }\n    }\n  }\n\n  fragment byUrlQueryContentItemFields on ContentItem {\n    guid: objectId\n    path: localId(filter: {not: [{equals: $exclude}]})\n    contentTypeId: content__type\n    dateCreated: createdDate_dt\n    dateModified: lastModifiedDate_dt\n    label: internal__name\n  }\n\n  fragment byUrlQueryBioFragment on component_bio {\n    guid: objectId\n    contentTypeId: content__type\n    label: internal__name\n    path: localId\n    bio_t\n    name_s\n    profilePic_s\n    linkButtonText_s\n    linkButtonUrl_s\n    showLinkButton_b\n    facebookLink_s\n    twitterLink_s\n    instagramLink_s\n    youTubeLink_s\n  }\n\n  fragment byUrlQueryRichText on component_rich_text {\n    ...byUrlQueryContentItemFields\n    content_html: content_html_raw\n  }\n\n  fragment byUrlQueryImage on component_image {\n    ...byUrlQueryContentItemFields\n    image_s\n    alternativeText_s\n  }\n\n  fragment byUrlQueryResponsiveColumns on component_responsive_columns {\n    ...byUrlQueryContentItemFields\n    columns_o {\n      item {\n        columnSize_s\n        content_o {\n          item {\n            key\n            component {\n              ...on component_rich_text {\n                ...byUrlQueryRichText\n              }\n              ...on component_image {\n                ...byUrlQueryImage\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`\n\n// language=GraphQL\nconst main = `\n  ${commonFragments}\n\n  fragment byUrlQueryHomepage on page_entry  {\n    pageTitle_s\n    pageDescription_s\n    bios_o {\n      item {\n        key\n        component {\n          ...byUrlQueryBioFragment\n        }\n      }\n    }\n    slider_o {\n      item {\n        key\n        component {\n          ...byUrlQueryContentItemFields\n          ...on component_slider {\n            ...byUrlQuerySlider\n          }\n        }\n      }\n    }\n  }\n\n  fragment byUrlQueryAboutPage on page_about {\n    pageTitle_s\n    pageDescription_s\n    headline_s\n    bios_o {\n      item {\n        key\n        component {\n          ...byUrlQueryBioFragment\n        }\n      }\n    }\n    content_o {\n      item {\n        key\n        component {\n          ...on component_rich_text {\n            ...byUrlQueryRichText\n          }\n          ...on component_image {\n            ...byUrlQueryImage\n          }\n          ...on component_responsive_columns {\n            ...byUrlQueryResponsiveColumns\n          }\n        }\n      }\n    }\n  }\n\n  fragment byUrlQueryContactPage on page_contact {\n    pageTitle_s\n    pageDescription_s\n    message_t\n    headline_s\n  }\n\n  fragment byUrlQueryCategoryPage on page_category {\n    pageTitle_s\n    pageDescription_s\n  }\n\n  fragment byUrlQuerySlider on component_slider {\n    ...byUrlQueryContentItemFields\n    posts_o {\n      item {\n        key\n        component {\n          ...byUrlQueryContentItemFields\n          slug: localId(transform: \"storeUrlToRenderUrl\")\n          pageTitle_s\n          pageDescription_s\n          blurb_t\n          headline_s\n          mainImage_s\n          authorBio_o {\n            item {\n              key,\n              component {\n                ...byUrlQueryBioFragment\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  query byUrlQuery(\n    $url: String\n    $skipContentType: Boolean = true\n    $includePosts: Boolean = true\n    $postsLimit: Int = 8\n    $postsOffset: Int = 0\n    $exclude: String = \"\"\n    $categoriesFilter: [TextFilters!] = []\n    $tagsFilter: [TextFilters!] = []\n  ) {\n    content: contentItems {\n      total\n      items {\n        ...byUrlQueryContentItemFields\n        url: localId(\n          transform: \"storeUrlToRenderUrl\",\n          filter:{ regex: $url }\n        )\n        content__type(\n          filter:{\n            regex: \".*(bio|post|entry|category|contact|about|search).*\"\n          }\n        ) @skip (if: $skipContentType)\n        ...on page_entry {\n          ...byUrlQueryHomepage\n        }\n        ...on page_about {\n          ...byUrlQueryAboutPage\n        }\n        ...on page_contact {\n          ...byUrlQueryContactPage\n        }\n        ...on page_category {\n          ...byUrlQueryCategoryPage\n        }\n        ...on component_post {\n          ...byUrlQueryPost\n        }\n      }\n    }\n    levelDescriptors: component_level__descriptor {\n      items {\n        siteTitle_s\n        file__name\n        websiteShortname_s\n        socialLinks_o {\n          item {\n            socialNetwork_s\n            label_s\n            url_s\n          }\n        }\n      }\n    }\n    posts: component_post(\n      limit: $postsLimit,\n      offset: $postsOffset,\n      sortOrder: DESC,\n      sortBy: \"lastModifiedDate_dt\"\n    ) @include(if: $includePosts) {\n      total\n      items {\n        ...byUrlQueryPost\n      }\n    }\n  }\n`;\n\n//language=GraphQL\nexport const postsQuery = `\n  ${commonFragments}\n\n  query postsQuery(\n    $postsLimit: Int = 8\n    $postsOffset: Int = 0\n    $exclude: String = \"\"\n    $categoriesFilter: [TextFilters!] = []\n    $tagsFilter: [TextFilters!] = []\n  ) {\n    posts: component_post(\n      limit: $postsLimit,\n      offset: $postsOffset,\n      sortOrder: DESC,\n      sortBy: \"lastModifiedDate_dt\"\n    ) {\n      total\n      items {\n        ...byUrlQueryPost\n      }\n    }\n  }\n`;\n\nexport default main;\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\n\nexport default function CircularProgressSpinner(props) {\n  const { message, screenHeight = true } = props;\n  return (\n    <div className={`circular-progress-spinner ${screenHeight ? 'circular-progress-spinner__screen-height' : ''}`}>\n      <div className=\"circular-progress-spinner--graphic-container\">\n        <svg className=\"circular-progress-spinner--graphic\">\n          <circle className=\"circular-progress-spinner--path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\"/>\n        </svg>\n      </div>\n      {\n        message &&\n        <p className=\"circular-progress-spinner--message\">{message}</p>\n      }\n    </div>\n  );\n}\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport React from 'react';\nimport { useGlobalContext } from './context';\n\nexport default function BaseLayout({ siteTitle, socialLinks, children }) {\n  const [{ theme }] = useGlobalContext();\n  return (\n    <div className={`wrap theme-${theme}`}>\n      <Header siteTitle={siteTitle} socialLinks={socialLinks}/>\n      <div className=\"wrap\">\n        {children}\n      </div>\n      <Footer socialLinks={socialLinks} />\n    </div>\n  );\n}\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useSearchQuery } from './hooks';\n\nlet count = 0;\n\nfunction SearchForm(props) {\n  const history = useHistory();\n  const { placeholder = '', id = `searchInput_${count++}` } = props;\n  const classes = Object.assign({\n    form: '',\n    input: '',\n    inputWrapper: ''\n  }, props.classes);\n  const [query, onChange] = useSearchQuery();\n  return (\n    <form\n      className={classes.form}\n      onSubmit={(e) => {\n        e.preventDefault();\n        query.trim() && history.push(`/search?q=${query}`);\n      }}\n    >\n      <div className={classes.inputWrapper}>\n        <span className=\"icon fa fa-search\" />\n        <input\n          id={id}\n          type=\"text\"\n          value={query}\n          onChange={onChange}\n          className={classes.input}\n          placeholder={placeholder}\n        />\n      </div>\n    </form>\n  );\n}\n\nexport default SearchForm;\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\nimport BaseLayout from '../shared/BaseLayout';\n\nexport default function NotFound() {\n  return (\n    <BaseLayout>\n      <section style={{ textAlign: 'center', padding: '50px 0' }}>\n        <h1>Not Found</h1>\n        <p>The page you're looking for does not exist.</p>\n      </section>\n    </BaseLayout>\n  );\n}\n\nexport function NotDeveloped() {\n  return (\n    <section>\n      The page you've selected needs to be created by the site developers.\n    </section>\n  );\n}\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { lazy } from 'react';\n\nconst map = {\n  '/page/entry': lazy(() => import('../pages/Home')),\n  '/page/about': lazy(() => import('../pages/About')),\n  '/page/contact': lazy(() => import('../pages/Contact')),\n  '/page/category': lazy(() => import('../pages/Category')),\n  '/page/search': lazy(() => import('../pages/Search')),\n  '/component/header': lazy(() => import('../components/Header')),\n  '/component/footer': lazy(() => import('../components/Footer')),\n  '/component/bio': lazy(() => import('../components/Bio')),\n  '/component/image': lazy(() => import('../components/Image')),\n  '/component/responsive_columns': lazy(() => import('../components/ResponsiveColumns')),\n  '/component/rich_text': lazy(() => import('../components/RichText')),\n  '/component/slider': lazy(() => import('../components/Slider')),\n  '/component/post': lazy(() => import('../pages/Post'))\n};\n\nexport default map;\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport NotFound, { NotDeveloped } from '../pages/NotFound';\nimport contentTypeMap from './contentTypeMap';\nimport React from 'react';\nimport { usePencil } from './hooks';\n\nfunction ContentTypeWithPencil(props) {\n  const ice = usePencil(props);\n  return <ContentType ice={ice} {...props} />;\n}\n\nexport function ContentType(props) {\n  const { model } = props;\n  const Component = (model === null) ? NotFound : (contentTypeMap[model.craftercms.contentTypeId] || NotDeveloped);\n  return <Component {...props} />;\n}\n\nexport function WrappedContentType(props) {\n\n  const {\n    wrapper,\n    wrapper: {\n      component: Wrapper = 'div'\n    } = {\n      component: 'div'\n    }\n  } = props;\n\n  const ice = usePencil(props);\n\n  // Props that get passed down to the wrapper element\n  // these could be things like className or any other\n  // HTML attributes or props\n  const cleanWrapperProps = { ...wrapper };\n  delete cleanWrapperProps.component;\n\n  // Props that get passed down to the ContentType\n  const cleanPassDownProps = { ...props };\n  delete cleanPassDownProps.wrapper;\n\n  return (\n    <Wrapper {...ice} {...cleanWrapperProps}>\n      <ContentType {...cleanPassDownProps} />\n    </Wrapper>\n  );\n}\n\nexport default ContentTypeWithPencil;\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\nimport { Link, NavLink } from 'react-router-dom';\nimport { useNavigation } from '../shared/hooks';\nimport SearchForm from '../shared/SearchForm';\nimport { useGlobalContext } from '../shared/context';\n\nexport default function Header({ siteTitle, socialLinks }) {\n  const nav = useNavigation();\n\n  const [{ $ }] = useGlobalContext();\n  const toggleNavBar = (e) => {\n    e.preventDefault();\n    $('#navbarMenu').toggleClass('show');\n  };\n\n  return (\n    <header role=\"banner\">\n      <div className=\"top-bar\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-9 social\">\n              {\n                socialLinks?.map((link) =>\n                  <a key={link.socialNetwork_s} href={link.url_s} target=\"_blank\" rel=\"noopener noreferrer\">\n                    <span className={'fa fa-' + link.socialNetwork_s} />\n                  </a>\n                )\n              }\n            </div>\n            <div className=\"col-3 search-top\">\n              <SearchForm\n                classes={{ form: 'search-top-form' }}\n                placeholder=\"Type keyword to search...\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"container logo-wrap\">\n        <div className=\"row pt-5\">\n          <div className=\"col-12 text-center\">\n            <a\n              className=\"absolute-toggle d-block d-md-none\" data-toggle=\"collapse\"\n              href=\"#navbarMenu\" role=\"button\"\n              onClick={toggleNavBar}\n              aria-expanded=\"false\" aria-controls=\"navbarMenu\"\n            ><span className=\"burger-lines\"></span></a>\n            <h1 className=\"site-logo\"><Link to=\"/\">{ siteTitle }</Link></h1>\n          </div>\n        </div>\n      </div>\n      <nav className=\"navbar navbar-expand-md navbar-light bg-light\">\n        <div className=\"container\">\n          <div className=\"collapse navbar-collapse\" id=\"navbarMenu\">\n            <ul className=\"navbar-nav mx-auto\">\n              {\n                nav?.sort(\n                  (\n                    { orderDefault_f: a },\n                    { orderDefault_f: b }\n                  ) => (a < b) ? -1 : ((a > b) ? 1 : 0)\n                ).map((page) =>\n                  <li className=\"nav-item\" key={page.url}>\n                    <NavLink\n                      exact\n                      className=\"nav-link\"\n                      activeClassName=\"active\"\n                      to={page.url}\n                    >\n                      {page.navLabel}\n                    </NavLink>\n                  </li>\n                )\n              }\n            </ul>\n          </div>\n        </div>\n      </nav>\n    </header>\n  );\n}\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useFooter, usePencil } from '../shared/hooks';\n\nexport default function Footer({ socialLinks }) {\n  const footer = useFooter();\n  const ice =  usePencil({ model: footer });\n\n  return (\n    <footer className=\"site-footer\" {...ice}>\n      <div className=\"container\">\n        <div className=\"row mb-5\">\n          <div className=\"col-md-4\">\n            <h3>{footer?.aboutTitle_s}</h3>\n            <p className=\"mb-4\">\n              <img src={footer?.aboutImage_s} alt=\"\" className=\"img-fluid\" />\n            </p>\n\n            <p>{footer?.about_t}</p>\n          </div>\n          <div className=\"col-md-6 ml-auto\">\n            <div className=\"row\">\n              <div className=\"col-md-6\">\n                <h3>{footer?.quickLinksTitle_s}</h3>\n                <ul className=\"list-unstyled\">\n                  {\n                    footer?.quickLinks_o.map((link, i) =>\n                      <li key={i}>\n                        <Link to={link.url_s}>{link.label_s}</Link>\n                      </li>\n                    )\n                  }\n                </ul>\n              </div>\n\n              <div className=\"col-md-1\"></div>\n\n              <div className=\"col-md-5\">\n                <div className=\"mb-5\">\n                  <h3>{footer?.socialLinksTitle_s}</h3>\n                  <ul className=\"list-unstyled footer-social\">\n                    {\n                      socialLinks?.map((link) =>\n                        <li key={link.socialNetwork_s}>\n                          <a href={link.url_s} target=\"_blank\" rel=\"noopener noreferrer\">\n                            <span className={'fa fa-' + link.socialNetwork_s}></span>\n                            {link.label_s}\n                          </a>\n                        </li>\n                      )\n                    }\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          {\n            footer &&\n            <div className=\"col-md-12 text-center\" dangerouslySetInnerHTML={{ __html: footer.copyright_html_raw }}/>\n          }\n        </div>\n      </div>\n    </footer>\n\n  );\n}\n"],"sourceRoot":""}