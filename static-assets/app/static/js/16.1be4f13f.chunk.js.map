{"version":3,"sources":["../../../../src/internal/operators/catchError.ts","components/Toast.js","pages/Contact.js"],"names":["props","display","text","type","className","role","style","position","top","right","translations","defineMessages","contactSuccess","id","defaultMessage","initialFormData","name","phone","email","message","initialToastData","model","meta","siteTitle","socialLinks","formatMessage","useIntl","useState","formData","setFormData","toastData","setToastData","showToast","setTimeout","handleChange","e","target","value","trim","BaseLayout","component","fieldId","onSubmit","preventDefault","ajax","post","pipe","error","subscribe","response","messageKey","htmlFor","onChange","required","cols","rows","action","placeholder","SidebarBios","RecentPostsAside","Toast"],"mappings":"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","file":"static/js/16.1be4f13f.chunk.js","sourcesContent":["/** PURE_IMPORTS_START tslib,_OuterSubscriber,_InnerSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function catchError(selector) {\n    return function catchErrorOperatorFunction(source) {\n        var operator = new CatchOperator(selector);\n        var caught = source.lift(operator);\n        return (operator.caught = caught);\n    };\n}\nvar CatchOperator = /*@__PURE__*/ (function () {\n    function CatchOperator(selector) {\n        this.selector = selector;\n    }\n    CatchOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new CatchSubscriber(subscriber, this.selector, this.caught));\n    };\n    return CatchOperator;\n}());\nvar CatchSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(CatchSubscriber, _super);\n    function CatchSubscriber(destination, selector, caught) {\n        var _this = _super.call(this, destination) || this;\n        _this.selector = selector;\n        _this.caught = caught;\n        return _this;\n    }\n    CatchSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var result = void 0;\n            try {\n                result = this.selector(err, this.caught);\n            }\n            catch (err2) {\n                _super.prototype.error.call(this, err2);\n                return;\n            }\n            this._unsubscribeAndRecycle();\n            var innerSubscriber = new InnerSubscriber(this, undefined, undefined);\n            this.add(innerSubscriber);\n            var innerSubscription = subscribeToResult(this, result, undefined, undefined, innerSubscriber);\n            if (innerSubscription !== innerSubscriber) {\n                this.add(innerSubscription);\n            }\n        }\n    };\n    return CatchSubscriber;\n}(OuterSubscriber));\n//# sourceMappingURL=catchError.js.map\n","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React from 'react';\n\nexport default function (props) {\n  const {\n    display,\n    text,\n    type\n  } = props;\n\n  const style = {\n    position: 'fixed',\n    top: 10,\n    right: 10\n  }\n\n  return (\n    <>\n      {\n        display &&\n        <div className={`alert alert-${type}`} role=\"alert\" style={style}>\n          {text}\n        </div>\n      }\n    </>\n  );\n}","/*\n * Copyright (C) 2007-2020 Crafter Software Corporation. All Rights Reserved.\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License version 3 as published by\n * the Free Software Foundation.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport React, { useState } from 'react';\nimport BaseLayout from '../shared/BaseLayout';\nimport RecentPostsAside from '../shared/RecentPostsAside';\nimport { SidebarCategories, SidebarTags } from '../shared/SidebarTaxonomies';\nimport { ajax } from 'rxjs/ajax';\nimport { catchError } from 'rxjs/operators';\nimport Toast from '../components/Toast';\nimport { defineMessages, useIntl } from 'react-intl';\nimport { RenderField } from '@craftercms/studio-guest';\nimport { SidebarBiosWithICE } from '../shared/SidebarBios';\n\nconst translations = defineMessages({\n  contactSuccess: {\n    id: 'contact.contactSuccess',\n    defaultMessage: 'Message successfully sent!'\n  }\n});\n\nconst initialFormData = {\n  name: '',\n  phone: '',\n  email: '',\n  message: ''\n}\n\nconst initialToastData = {\n  display: false,\n  type: '',\n  text: ''\n}\n\nexport default function (props) {\n  const {\n    model,\n    meta: {\n      siteTitle,\n      socialLinks\n    }\n  } = props;\n\n  const { formatMessage } = useIntl();\n  const [formData, setFormData] = useState(initialFormData);\n  const [toastData, setToastData] = useState(initialToastData);\n  const showToast = (text, type) => {\n    setToastData({\n      display: true,\n      text,\n      type\n    });\n    setTimeout(() => {\n      setToastData(initialToastData);\n    }, 3000);\n  }\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value.trim()\n    });\n  };\n\n  const handleSubmit = function(e) {\n    e.preventDefault();\n\n    ajax.post(\n      '/api/contactus.json',\n      formData,\n      {\n        'Content-Type': 'application/json'\n      }\n    ).pipe(\n      catchError(error => [error])\n    ).subscribe(response => {\n      if (response.name === 'AjaxError') {\n        showToast('There was an error sending the message', 'danger');\n      } else {\n        setFormData(initialFormData);\n        showToast(formatMessage(translations[response.response.messageKey]), 'success');\n      }\n    });\n  }\n\n  return (\n    <BaseLayout siteTitle={siteTitle} socialLinks={socialLinks}>\n      <section className=\"site-section\">\n        <div className=\"container\">\n          <div className=\"row mb-4\">\n            <div className=\"col-md-6\">\n              <RenderField component=\"h1\" model={model} fieldId=\"headline_s\" />\n              <RenderField component=\"p\" model={model} fieldId=\"message_t\" />\n            </div>\n          </div>\n          <div className=\"row blog-entries\">\n            <div className=\"col-md-12 col-lg-8 main-content\">\n\n              <form onSubmit={handleSubmit}>\n                <div className=\"row\">\n                  <div className=\"col-md-12 form-group\">\n                    <label htmlFor=\"name\">Name</label>\n                    <input\n                      type=\"text\"\n                      id=\"name\"\n                      name=\"name\"\n                      className=\"form-control\"\n                      value={formData.name}\n                      onChange={handleChange}\n                      required\n                    />\n                  </div>\n                  <div className=\"col-md-12 form-group\">\n                    <label htmlFor=\"phone\">Phone</label>\n                    <input\n                      type=\"text\"\n                      id=\"phone\"\n                      name=\"phone\"\n                      className=\"form-control\"\n                      value={formData.phone}\n                      onChange={handleChange}\n                    />\n                  </div>\n                  <div className=\"col-md-12 form-group\">\n                    <label htmlFor=\"email\">Email</label>\n                    <input\n                      type=\"email\"\n                      id=\"email\"\n                      name=\"email\"\n                      className=\"form-control\"\n                      value={formData.email}\n                      onChange={handleChange}\n                      required\n                    />\n                  </div>\n                </div>\n                <div className=\"row\">\n                  <div className=\"col-md-12 form-group\">\n                    <label htmlFor=\"message\">Write Message</label>\n                    <textarea\n                      name=\"message\"\n                      id=\"message\"\n                      className=\"form-control\"\n                      cols=\"30\"\n                      rows=\"8\"\n                      value={formData.message}\n                      onChange={handleChange}\n                      required\n                    />\n                  </div>\n                </div>\n                <div className=\"row\">\n                  <div className=\"col-md-6 form-group\">\n                    <input type=\"submit\" value=\"Send Message\" className=\"btn btn-primary\"/>\n                  </div>\n                </div>\n              </form>\n\n\n            </div>\n\n            <div className=\"col-md-12 col-lg-4 sidebar\">\n              <div className=\"sidebar-box search-form-wrap\">\n                <form action=\"#\" className=\"search-form\">\n                  <div className=\"form-group\">\n                    <span className=\"icon fa fa-search\"/>\n                    <input type=\"text\" className=\"form-control\" id=\"s\" placeholder=\"Type a keyword and hit enter\"/>\n                  </div>\n                </form>\n              </div>\n\n              <SidebarBiosWithICE model={model} fieldId=\"bios_o\" />\n\n              <RecentPostsAside />\n\n              <SidebarCategories/>\n\n              <SidebarTags/>\n\n            </div>\n\n          </div>\n        </div>\n      </section>\n\n      <Toast\n        display={toastData.display}\n        type={toastData.type}\n        text={toastData.text}\n      />\n    </BaseLayout>\n  );\n}\n"],"sourceRoot":""}